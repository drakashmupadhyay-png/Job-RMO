<!DOCTYPE html>
<html lang="en" data-theme="system">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RMO Job-Flow</title>
    <!-- Stylesheets -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- FullCalendar -->
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.14/index.global.min.js'></script>
    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.14/main.min.css' rel='stylesheet' />
</head>
<body>

    <!-- ======================================================================= -->
    <!-- AUTHENTICATION VIEW (For logged-out users) -->
    <!-- ======================================================================= -->
    <div id="auth-view">
        <div class="login-container">
            <!-- Login Form -->
            <form id="login-form" class="auth-form">
                <div class="login-header">
                    <div class="login-icon-wrapper"><i class="fa-solid fa-briefcase-medical"></i></div>
                    <h1>RMO Job-Flow</h1>
                    <p class="login-subtitle">Please sign in to continue.</p>
                </div>
                <div class="form-group"><label for="login-email">Email</label><input type="email" id="login-email" required></div>
                <div class="form-group"><label for="login-pass">Password</label><input type="password" id="login-pass" required></div>
                <button type="submit" class="primary-action-btn" style="width: 100%;">Login</button>
                <p id="login-error" class="hidden status-message error">Invalid credentials.</p>
                <p class="auth-switch-text">Don't have an account? <a href="#" id="show-signup-link">Sign Up</a></p>
            </form>

            <!-- Signup Form -->
            <form id="signup-form" class="auth-form hidden">
                <div class="login-header">
                    <div class="login-icon-wrapper"><i class="fa-solid fa-user-plus"></i></div>
                    <h1>Create Account</h1>
                    <p class="login-subtitle">Get started with RMO Job-Flow.</p>
                </div>
                <div class="form-group"><label for="signup-name">Full Name</label><input type="text" id="signup-name" required></div>
                <div class="form-group"><label for="signup-email">Email</label><input type="email" id="signup-email" required></div>
                <div class="form-group"><label for="signup-pass">Set Password</label><input type="password" id="signup-pass" required></div>
                <div class="form-group"><label for="signup-cpass">Confirm Password</label><input type="password" id="signup-cpass" required></div>
                <button type="submit" class="primary-action-btn" style="width: 100%;">Sign Up</button>
                <p id="signup-error" class="hidden status-message error">Could not create account.</p>
                <p class="auth-switch-text">Already have an account? <a href="#" id="show-login-link">Log In</a></p>
            </form>
        </div>
    </div>

    <!-- ======================================================================= -->
    <!-- MAIN APPLICATION VIEW (The entire app for logged-in users) -->
    <!-- ======================================================================= -->
    <div id="main-app-view" class="hidden">

        <!-- 1. GLOBAL APP SIDEBAR -->
        <aside id="app-sidebar">
            <div class="sidebar-header">
                <div class="nav-logo"><i class="fa-solid fa-briefcase-medical"></i><h1>RMO Job-Flow</h1></div>
            </div>
            <nav class="sidebar-nav">
                <a href="#dashboard" class="nav-link active" title="Dashboard"><i class="fa-solid fa-table-columns"></i><span>Dashboard</span></a>
                <a href="#experienceBook" class="nav-link" title="Experience Book"><i class="fa-solid fa-book-bookmark"></i><span>Experience Book</span></a>
                <a href="#documents" class="nav-link" title="My Documents"><i class="fa-solid fa-folder-open"></i><span>My Documents</span></a>
            </nav>
            <div class="sidebar-footer">
                <!-- Clock will be dynamically inserted here by ui.js -->
            </div>
        </aside>

        <!-- 2. MAIN WORKSPACE -->
        <div id="main-workspace">
            
            <header id="global-header">
                <div class="header-left-wrapper">
                    <button id="mobile-menu-btn" aria-label="Open Menu"><i class="fa-solid fa-bars"></i></button>
                    <div class="header-title-area">
                        <div class="nav-logo"><i class="fa-solid fa-briefcase-medical"></i><h1>RMO Job-Flow</h1></div>
                    </div>
                </div>
                <div class="header-user-area">
                    <div class="reminders-container">
                        <button id="smart-reminders-btn" class="icon-btn" title="Urgent Reminders"><i class="fa-solid fa-bell"></i><span id="reminders-badge" class="badge hidden">0</span></button>
                        <div id="reminders-dropdown" class="dropdown-menu hidden">
                            <!-- Reminders will be inserted here by ui.js -->
                        </div>
                    </div>
                    <div class="nav-user">
                        <span class="nav-welcome-text">Welcome, <span id="nav-user-name">User</span></span>
                        <div class="nav-user-menu" id="nav-user-menu">
                            <img id="nav-user-img" src="placeholder.jpg" alt="User Avatar" class="nav-user-avatar">
                            <div class="dropdown-menu hidden" id="user-dropdown">
                                <!-- User info will be dynamically inserted here -->
                                <a href="#settings" class="dropdown-item nav-link-item"><i class="fa-solid fa-gear"></i> Settings</a>
                                <a href="#" class="dropdown-item" id="logout-btn"><i class="fa-solid fa-right-from-bracket"></i> Logout</a>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <div id="page-content-container">

                <!-- DASHBOARD PAGE -->
                <main id="dashboard" class="page-content">
                    <div class="dashboard-layout">
                        <aside id="filter-panel" class="inspector-panel collapsed">
                           <div class="inspector-header"><h3><i class="fa-solid fa-filter"></i> Refine List</h3><button id="close-filter-panel-btn" class="icon-btn" aria-label="Close Filters">Ã—</button></div>
                           <div class="inspector-content">
                               <div class="filter-group"><label for="search-bar">Search</label><input type="search" id="search-bar" placeholder="Search all fields..."></div>
                               <div class="filter-group"><label for="state-filter">State</label><select id="state-filter"></select></div>
                               <div class="filter-group"><label for="type-filter">Type</label><select id="type-filter"></select></div>
                               <div class="filter-group"><label for="status-filter">Status</label><select id="status-filter"></select></div>
                               <div class="filter-group"><label for="sort-by-filter">Sort by</label><select id="sort-by-filter"></select></div>
                               <button id="clear-filters-btn" class="secondary-btn" style="width: 100%;">Clear Filters</button>
                           </div>
                        </aside>
                        <div id="dashboard-main-content">
                            <div class="toolbar"><h2 class="page-title">Dashboard</h2><div class="toolbar-actions"><button id="toggle-filters-btn" class="secondary-btn"><i class="fa-solid fa-filter"></i> Filters <span id="filter-count-badge" class="badge hidden">0</span></button><button id="select-jobs-btn" class="secondary-btn"><i class="fa-solid fa-check-square"></i> Select</button><div class="view-switcher"><button id="table-view-btn" class="view-btn active" title="Table View"><i class="fa-solid fa-table-list"></i></button><button id="calendar-view-btn" class="view-btn" title="Calendar View"><i class="fa-solid fa-calendar-days"></i></button></div></div></div>
                            <div id="table-view-container" class="view-container"><div class="table-container"><table><thead><tr><th class="select-col hidden"><input type="checkbox" id="select-all-checkbox" title="Select All Visible"></th><th class="expand-col" aria-label="Expand Row"></th><th>Job (Title & Hospital)</th><th>Status</th><th>Closing Date</th><th>Follow-Up</th><th class="actions-col" aria-label="Actions"></th></tr></thead><tbody id="jobs-table-body"></tbody></table></div></div>
                            <div id="card-view-container" class="view-container"></div>
                            <div id="calendar-view-container" class="view-container hidden"><div id="calendar"></div></div>
                        </div>
                    </div>
                </main>

                <!-- EXPERIENCE BOOK PAGE -->
                <main id="experienceBook" class="page-content hidden">
                    <div class="experience-book-layout">
                        <aside id="experience-sidebar">
                            <div class="sidebar-block"><h3>Categories</h3><ul id="experience-categories-list" class="category-list"></ul></div>
                        </aside>
                        <div class="experience-main-content">
                            <div class="toolbar"><h2 class="page-title">Experience Book</h2><input type="search" id="experience-search-bar" placeholder="Search experiences..."></div>
                            <div id="experience-tag-filters" class="tag-filter-bar"></div>
                            <div id="experience-cards-container" class="experience-cards-container"></div>
                        </div>
                        <aside id="experience-inspector" class="inspector-panel collapsed"></aside>
                    </div>
                </main>

                <!-- DOCUMENTS PAGE -->
                <main id="documents" class="page-content hidden">
                     <div class="documents-layout">
                        <aside id="document-sidebar">
                            <h3>Folders</h3>
                            <ul id="document-folders-list" class="category-list"></ul>
                            <button id="add-folder-btn" class="secondary-btn" style="width: 100%; margin-top: 15px;"><i class="fa-solid fa-folder-plus"></i> New Folder</button>
                        </aside>
                        <div class="document-main-content">
                            <div class="toolbar"><h2 class="page-title">My Documents</h2><div class="view-switcher"><button id="doc-list-view-btn" class="view-btn active" title="List View"><i class="fa-solid fa-list"></i></button><button id="doc-grid-view-btn" class="view-btn" title="Grid View"><i class="fa-solid fa-grip"></i></button></div></div>
                            <div id="upload-dropzone" class="upload-dropzone"><i class="fa-solid fa-cloud-arrow-up"></i><p>Drag & drop files here, or click to browse</p></div>
                            <div id="document-list-container" class="list-view"></div>
                        </div>
                        <aside id="document-inspector" class="inspector-panel collapsed"></aside>
                    </div>
                </main>

                <!-- SETTINGS PAGE -->
                <main id="settings" class="page-content hidden">
                    <h2 class="page-title" style="margin-bottom: 20px;">Settings</h2>
                    <div class="settings-layout">
                        <nav class="settings-sidebar">
                            <a href="#profile" class="settings-link active"><i class="fa-solid fa-user-circle"></i> Profile</a>
                            <a href="#security" class="settings-link"><i class="fa-solid fa-shield-halved"></i> Security</a>
                            <a href="#dataManagement" class="settings-link"><i class="fa-solid fa-database"></i> Data Management</a>
                            <a href="#preferences" class="settings-link"><i class="fa-solid fa-sliders"></i> Preferences</a>
                            <a href="#account" class="settings-link"><i class="fa-solid fa-user-xmark"></i> Account</a>
                        </nav>
                        <div class="settings-content">
                            <section id="profile-section" class="settings-section"></section>
                            <section id="security-section" class="settings-section hidden"></section>
                            <section id="dataManagement-section" class="settings-section hidden"></section>
                            <section id="preferences-section" class="settings-section hidden"></section>
                            <section id="account-section" class="settings-section hidden"></section>
                        </div>
                    </div>
                </main>
                
                <!-- APPLICATION DETAIL PAGE -->
                <main id="applicationDetailPage" class="page-content hidden">
                    <!-- This content is now dynamically generated by ui.js -->
                    <!-- The renderApplicationDetailPage function will build the header, workspace, and footer inside here -->
                </main>

            </div>
        </div>
    </div>

    <!-- GLOBAL ELEMENTS (Modals, FAB, etc.) -->
    <button id="fab" class="fab hidden" aria-label="Add New Item"><i class="fa-solid fa-plus"></i></button>
    <div id="selection-action-bar" class="selection-action-bar hidden"></div>
    <div id="delete-modal-backdrop" class="modal-backdrop hidden"></div>
    <input type="file" id="import-file-input" class="hidden" accept=".json">
    <input type="file" id="bulk-add-input" class="hidden" accept=".json">
    <input type="file" id="profile-image-upload" class="hidden" accept="image/*">
    <input type="file" id="master-doc-file-input" class="hidden" multiple>
    <div id="toast-container"></div>
    
    <!-- JAVASCRIPT LOGIC -->
    <script type="module" src="auth.js"></script>

</body>
</html>